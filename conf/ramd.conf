# RAM PostgreSQL Auto-Failover Daemon Configuration
# Copyright (c) 2024-2025, pgElephant, Inc.
#
# This is the comprehensive configuration file for RAMD daemon
# All settings are documented with examples and defaults

# =============================================================================
# NODE IDENTIFICATION
# =============================================================================
# Unique identifier for this node in the cluster
# Values: Any positive integer
node_id = 1

# Hostname or IP address of this node
# Values: Valid hostname or IP address
hostname = localhost

# Name of the PostgreSQL cluster
# Values: Any valid string without spaces
cluster_name = ram_cluster

# Total number of nodes in the cluster
# Values: Any positive integer >= 3
cluster_size = 3

# =============================================================================
# POSTGRESQL SETTINGS
# =============================================================================
# PostgreSQL server port
# Values: 1024-65535
postgresql_port = 5432

# PostgreSQL data directory
# Values: Valid filesystem path with write permissions
postgresql_data_dir = /tmp/postgres_data

# PostgreSQL binary directory
# Values: Valid filesystem path containing PostgreSQL binaries
postgresql_bin_dir = /usr/local/pgsql.17/bin

# PostgreSQL log directory
# Values: Valid filesystem path with write permissions
postgresql_log_dir = /tmp/postgres_logs

# Database name for connections
# Values: Valid PostgreSQL database name
database_name = postgres

# Database user for connections
# Values: Valid PostgreSQL username
database_user = postgres

# PostgreSQL superuser
# Values: Valid PostgreSQL superuser name
postgresql_user = postgres

# Replication user for streaming replication
# Values: Valid PostgreSQL username with replication privileges
replication_user = replicator

# PostgreSQL password (leave empty for trust authentication)
# Values: Empty string or valid password
postgresql_password = 

# =============================================================================
# HTTP API CONFIGURATION
# =============================================================================
# Enable HTTP API server
# Values: true, false
http_api_enabled = true

# IP address to bind HTTP server
# Values: Valid IP address or hostname
http_bind_address = 127.0.0.1

# HTTP server port
# Values: 1024-65535
http_port = 8008

# Enable HTTP authentication
# Values: true, false
http_auth_enabled = false

# HTTP authentication token
# Values: Empty string or valid token string
http_auth_token = 

# Maximum request size in bytes
# Values: 1024-10485760
http_max_request_size = 1048576

# Request timeout in seconds
# Values: 1-3600
http_request_timeout = 30

# =============================================================================
# MONITORING SETTINGS
# =============================================================================
# Health check interval in milliseconds
# Values: 1000-60000
monitor_interval_ms = 5000

# Health check timeout in milliseconds
# Values: 1000-60000
health_check_timeout_ms = 10000

# Failover timeout in milliseconds
# Values: 5000-300000
failover_timeout_ms = 30000

# Recovery timeout in milliseconds
# Values: 30000-3600000
recovery_timeout_ms = 300000

# Enable automatic failover
# Values: true, false
auto_failover_enabled = true

# Enable synchronous replication
# Values: true, false
synchronous_replication = false

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
# Log level: debug, info, notice, warning, error, critical, alert, emergency
# Values: debug, info, notice, warning, error, critical, alert, emergency
log_level = info

# Log to console
# Values: true, false
log_to_console = true

# Log to syslog
# Values: true, false
log_to_syslog = false

# Log file path (empty for no file logging)
# Values: Empty string or valid filesystem path
log_file = 

# Log rotation size in MB
# Values: 1-1024
log_rotation_size_mb = 100

# Number of log files to keep
# Values: 1-100
log_rotation_count = 5

# =============================================================================
# CLUSTER NETWORKING
# =============================================================================
# Raft communication port
# Values: 1024-65535
rale_port = 7400

# Data store communication port
# Values: 1024-65535
dstore_port = 7401

# Network interface to bind cluster communication
# Values: Empty string or valid network interface name
cluster_bind_interface = 

# =============================================================================
# SYNCHRONOUS REPLICATION
# =============================================================================
# Comma-separated list of synchronous standby names
# Values: Empty string or comma-separated list of node names
sync_standby_names = 

# Number of synchronous standbys required
# Values: 0-cluster_size-1
num_sync_standbys = 1

# Synchronous replication timeout in milliseconds
# Values: 1000-300000
sync_replication_timeout_ms = 10000

# Enforce synchronous standbys
# Values: true, false
enforce_sync_standbys = true

# =============================================================================
# MAINTENANCE SETTINGS
# =============================================================================
# Enable maintenance mode
# Values: true, false
maintenance_mode_enabled = true

# Drain timeout in milliseconds
# Values: 1000-300000
maintenance_drain_timeout_ms = 30000

# Backup before maintenance
# Values: true, false
maintenance_backup_before = false

# =============================================================================
# SECURITY SETTINGS
# =============================================================================
# Enable SSL/TLS for HTTP API
# Values: true, false
ssl_enabled = false

# SSL certificate file
# Values: Empty string or valid filesystem path to certificate file
ssl_cert_file = 

# SSL private key file
# Values: Empty string or valid filesystem path to private key file
ssl_key_file = 

# SSL CA certificate file
# Values: Empty string or valid filesystem path to CA certificate file
ssl_ca_file = 

# Rate limiting enabled
# Values: true, false
rate_limiting_enabled = true

# Rate limit requests per minute per IP
# Values: 1-10000
rate_limit_requests_per_minute = 100

# =============================================================================
# BACKUP SETTINGS
# =============================================================================
# Backup tool: pgbackrest, barman, custom
# Values: pgbackrest, barman, custom
backup_tool = pgbackrest

# Backup repository path
# Values: Valid filesystem path with write permissions
backup_repository = /var/lib/ramd/backups

# Backup retention days
# Values: 1-365
backup_retention_days = 7

# Backup compression
# Values: true, false
backup_compression = true

# =============================================================================
# PROMETHEUS METRICS
# =============================================================================
# Enable Prometheus metrics endpoint
# Values: true, false
prometheus_enabled = true

# Prometheus metrics port
# Values: 1024-65535
prometheus_port = 9090

# Prometheus metrics path
# Values: Valid URL path starting with /
prometheus_path = /metrics

# =============================================================================
# DAEMON SETTINGS
# =============================================================================
# Run as daemon
# Values: true, false
daemonize = false

# PID file path
# Values: Valid filesystem path with write permissions
pid_file = /tmp/ramd.pid

# User to run as (empty for current user)
# Values: Empty string or valid system username
daemon_user = 

# Group to run as (empty for current group)
# Values: Empty string or valid system group name
daemon_group = 

# Working directory
# Values: Valid filesystem path with write permissions
working_directory = /tmp

# =============================================================================
# CLUSTER NODES
# =============================================================================
# Node 1 configuration
# Values: Valid hostname or IP address
node_1_hostname = localhost
# Values: 1024-65535
node_1_port = 5432
# Values: primary, replica
node_1_role = primary

# Node 2 configuration
# Values: Valid hostname or IP address
node_2_hostname = localhost
# Values: 1024-65535
node_2_port = 5433
# Values: primary, replica
node_2_role = replica

# Node 3 configuration
# Values: Valid hostname or IP address
node_3_hostname = localhost
# Values: 1024-65535
node_3_port = 5434
# Values: primary, replica
node_3_role = replica

# =============================================================================
# ADVANCED SETTINGS
# =============================================================================
# Connection pool size
# Values: 1-100
connection_pool_size = 10

# Connection timeout in seconds
# Values: 1-300
connection_timeout = 30

# Query timeout in seconds
# Values: 1-3600
query_timeout = 60

# Enable debug mode
# Values: true, false
debug_mode = false

# Enable performance profiling
# Values: true, false
profiling_enabled = false

# Memory limit in MB
# Values: 128-16384
memory_limit_mb = 512

# CPU limit percentage
# Values: 1-100
cpu_limit_percent = 80
